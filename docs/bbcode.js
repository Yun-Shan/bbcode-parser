(()=>{"use strict";var t={};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}();var r,e=function(){function t(){this.TAG_HANDLER_MAP={},this.TAG_ALIASES_MAP={}}return t.prototype.transformAsIs=function(t,r,e){return"["+(r?t+"="+r:t)+"]"+e+"[/"+t+"]"},t.prototype.transformTag=function(t,r,e){null==r&&(r=""),t=t.substring(1);var n=this.TAG_ALIASES_MAP[t];if(!n)return this.transformAsIs(t,e,r);var o=this.TAG_HANDLER_MAP[n];if(o){var i=o.encodeToHtml(n,e,r);if("string"==typeof i)return i}return this.transformAsIs(n,e,r)},t.prototype.filterXSS=function(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")},t.prototype.registerTagHandler=function(t){this.TAG_HANDLER_MAP[t.tagName()]=t,this.TAG_ALIASES_MAP[t.tagName()]=t.tagName()},t.prototype.getHandler=function(t){return t=this.TAG_ALIASES_MAP[t],this.TAG_HANDLER_MAP[t]},t.prototype.bbcode2html=function(r){for(var e=[],n=t.STATE_NORMAL,o="",i=0;i<r.length;i++){var u=r[i];switch(u){case"[":n===t.STATE_NORMAL&&i<r.length?(o.length>0&&(e.push({type:t.TYPE_TEXT,value:o.replace(/ /g,"&nbsp;")}),o=""),o="[","/"===r[i+1]?(n=t.STATE_BBCODE_CLOSE_START,o+="/",i++):n=t.STATE_BBCODE_OPEN_START):n===t.STATE_BBCODE_OPEN_START||n===t.STATE_BBCODE_CLOSE_START?o.length>0&&(e.push({type:t.TYPE_TEXT,value:o.replace(/ /g,"&nbsp;")}),o="["):o+=u;break;case"]":if(n===t.STATE_BBCODE_OPEN_START){var c="",a="",p=o.indexOf("=");p>0?(a=o.substring(p+1),c=o.substring(0,p)):c=o,(s=this.getHandler(c.substring(1)))?(s.isSelfClose()?e.push({type:t.TYPE_TEXT,value:this.transformTag(c,"",a.replace(/ /g,"&nbsp;"))}):e.push({type:t.TYPE_BBCODE_OPEN,value:c,arg:a.replace(/ /g,"&nbsp;")}),o=""):o+="]",n=t.STATE_NORMAL}else if(n===t.STATE_BBCODE_CLOSE_START){var s;if(c=o.substring(2),(s=this.getHandler(c))&&!s.isSelfClose()){var l="",f=!1;t:for(;;){var y=e.pop();if(!y)break;switch(y.type){case t.TYPE_TEXT:l=y.value+l;break;case t.TYPE_BBCODE_OPEN:if(y.value.substring(1)===o.substring(2)){e.push({type:t.TYPE_TEXT,value:this.transformTag(y.value,l,y.arg)}),l="",f=!0;break t}l=this.transformTag(y.value,l,y.arg)}}f||(l+=o+"]"),l.length>0&&e.push({type:t.TYPE_TEXT,value:l}),o="",n=t.STATE_NORMAL}else o+="]",n=t.STATE_NORMAL}else o+=u;break;case"\n":o+="<br/>";break;default:o+=u}}for(var _="",h=void 0;h=e.pop();)h.type===t.TYPE_BBCODE_OPEN?(o.length>0&&(_+=o,o=""),_=this.transformTag(h.value,_,h.arg)):h.type===t.TYPE_TEXT&&(_=h.value+_);return o.length>0&&(_+=o),console.log(_),_},t.prototype.html2bbcode=function(t){for(var r="",e=0,n=Array.from((new DOMParser).parseFromString(t,"text/html").getElementsByTagName("body")[0].childNodes);e<n.length;e++){var o=n[e];r+=this.resloveNode(o)}return r},t.prototype.resloveNode=function(t){var r="";Array.isArray(t)||(t=t instanceof NodeList||t instanceof HTMLCollection?Array.from(t):[t]);for(var e=0,n=t;e<n.length;e++){var o=n[e];switch(o.nodeType){case o.ELEMENT_NODE:var i=o;if("br"===i.tagName.toLowerCase()){r+="\n";break}var u=i.getAttribute("data-bbcode-tag");u||(u=i.tagName.toLowerCase());var c=this.getHandler(u);r+=c?c.decodeFromHtml(i,this.resloveNode.bind(this)):this.resloveNode(Array.from(o.childNodes));break;case o.TEXT_NODE:r+=o.textContent.replace(/[\n\r ]/g,"")}}return r},t.STATE_NORMAL=0,t.STATE_BBCODE_OPEN_START=1,t.STATE_BBCODE_CLOSE_START=2,t.TYPE_TEXT=0,t.TYPE_BBCODE_OPEN=1,t}(),n=function(){function t(){}return t.prototype.isSelfClose=function(){return!1},t.prototype.splitArgs=function(t){return t.split(";")},t}(),o=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(t[e]=r[e])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return o(r,t),r.prototype.tagName=function(){return"b"},r.prototype.tagAliases=function(){return[]},r.prototype.encodeToHtml=function(t,r,e){return e?"<"+this.tagName()+">"+e+"</"+this.tagName()+">":""},r.prototype.decodeFromHtml=function(t,r){return"[b]"+r(t.childNodes)+"[/b]"},r}(n),u=function(){var t=function(r,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(t[e]=r[e])})(r,e)};return function(r,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=r}t(r,e),r.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),c=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return u(r,t),r.prototype.tagName=function(){return"i"},r.prototype.tagAliases=function(){return[]},r.prototype.encodeToHtml=function(t,r,e){return e?"<"+this.tagName()+">"+e+"</"+this.tagName()+">":""},r.prototype.decodeFromHtml=function(t,r){return"[i]"+r(t.childNodes)+"[/i]"},r}(n),a=function(){var t=function(r,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(t[e]=r[e])})(r,e)};return function(r,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=r}t(r,e),r.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),p=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return a(r,t),r.prototype.tagName=function(){return"color"},r.prototype.tagAliases=function(){return[]},r.prototype.encodeToHtml=function(t,r,e){return e?r?(r.match(/^[0-9a-fA-F]{6}$/)&&(r="#"+r),'<div style="color:'+r+';display: inline-block">'+e+"</div>"):e:""},r.prototype.decodeFromHtml=function(t,r){return"[color="+t.getAttribute("data-bbcode-color")+"]"+r(t.childNodes)+"[/color]"},r}(n),s=function(){var t=function(r,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(t[e]=r[e])})(r,e)};return function(r,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=r}t(r,e),r.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),l=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return s(r,t),r.prototype.tagName=function(){return"mask"},r.prototype.tagAliases=function(){return[]},r.prototype.encodeToHtml=function(t,r,e){return e?'<div class="mask"><span class="heimu" title="你知道的太多了">'+e+"</span></div>":""},r.prototype.decodeFromHtml=function(t,r){return"[mask]"+r(t.childNodes)+"[/mask]"},r}(n),f=function(){var t=function(r,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(t[e]=r[e])})(r,e)};return function(r,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=r}t(r,e),r.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),y=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return f(r,t),r.prototype.tagName=function(){return"collapse"},r.prototype.tagAliases=function(){return[]},r.prototype.encodeToHtml=function(t,r,e){return r||(r="点击展开"),0===r.indexOf("title=")&&(r=r.substring(6)),"<div><details><summary><b>"+r+"</b></summary><p>"+e+"</p></details></div>"},r.prototype.decodeFromHtml=function(t,r){return"[collapse]"+r(t.getElementsByClassName("collapse-content"))+"[/collapse]"},r}(n),_=function(){var t=function(r,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(t[e]=r[e])})(r,e)};return function(r,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=r}t(r,e),r.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),h=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return _(r,t),r.prototype.tagName=function(){return"dice"},r.prototype.tagAliases=function(){return[]},r.prototype.encodeToHtml=function(t,r,e){return e?!!e.match(/^((\d+)|(\d*d\d+))(\+((\d+)|(\d*d\d+)))*$/)&&'<div class="dice">假装有骰娘：'+e+"="+Math.round(200*Math.random())+"</div>":""},r.prototype.decodeFromHtml=function(t,r){return"DICE TODO"},r}(n),g=function(){var t=function(r,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(t[e]=r[e])})(r,e)};return function(r,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=r}t(r,e),r.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),T=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return g(r,t),r.prototype.tagName=function(){return"u"},r.prototype.tagAliases=function(){return[]},r.prototype.encodeToHtml=function(t,r,e){return e?"<"+this.tagName()+">"+e+"</"+this.tagName()+">":""},r.prototype.decodeFromHtml=function(t,r){return"[u]"+r(t.childNodes)+"[/u]"},r}(n),d=function(){var t=function(r,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(t[e]=r[e])})(r,e)};return function(r,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=r}t(r,e),r.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),m=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return d(r,t),r.prototype.tagName=function(){return"s"},r.prototype.tagAliases=function(){return[]},r.prototype.encodeToHtml=function(t,r,e){return e?"<"+this.tagName()+">"+e+"</"+this.tagName()+">":""},r.prototype.decodeFromHtml=function(t,r){return"[s]"+r(t.childNodes)+"[/s]"},r}(n),A=function(){var t=function(r,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(t[e]=r[e])})(r,e)};return function(r,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=r}t(r,e),r.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),O=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return A(r,t),r.prototype.tagName=function(){return"img"},r.prototype.tagAliases=function(){return[]},r.prototype.isSelfClose=function(){return!0},r.prototype.encodeToHtml=function(t,r,e){var n=this.splitArgs(r);return n[0],n.length>1&&n[1],n.length>2&&n[2],n.length>3&&n[3],n.length>4&&n[4],n.length>5&&n[5],"<"+this.tagName()+' src="'+r+'"/>'},r.prototype.decodeFromHtml=function(t,r){return"[img="+t.getAttribute("src")+"]"},r}(n),E=function(){var t=function(r,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(t[e]=r[e])})(r,e)};return function(r,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=r}t(r,e),r.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),b=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return E(r,t),r.prototype.tagName=function(){return"hr"},r.prototype.tagAliases=function(){return[]},r.prototype.isSelfClose=function(){return!0},r.prototype.encodeToHtml=function(t,r,e){return"<hr/>"},r.prototype.decodeFromHtml=function(t,r){return"[hr]"},r}(n),v=new e;v.registerTagHandler(new i),v.registerTagHandler(new c),v.registerTagHandler(new T),v.registerTagHandler(new m),v.registerTagHandler(new p),v.registerTagHandler(new l),v.registerTagHandler(new y),v.registerTagHandler(new h),v.registerTagHandler(new O),v.registerTagHandler(new b),t.g.BBCODE={newParser:function(){return new e},defaultParser:v,bbcode2html:function(t){return v.bbcode2html(t)},html2bbcode:function(t){return v.html2bbcode(t)}}})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9iYmNvZGUtcGFyc2VyL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2JiY29kZS1wYXJzZXIvd2VicGFjay9ydW50aW1lL2dsb2JhbCIsIndlYnBhY2s6Ly9iYmNvZGUtcGFyc2VyLy4vc3JjL0JCQ09ERVBhcnNlci50cyIsIndlYnBhY2s6Ly9iYmNvZGUtcGFyc2VyLy4vc3JjL3RhZy9UYWdIYW5kbGVyLnRzIiwid2VicGFjazovL2JiY29kZS1wYXJzZXIvLi9zcmMvdGFnL2hhbmRsZXJzL1RhZ0hhbmRsZXJCb2xkLnRzIiwid2VicGFjazovL2JiY29kZS1wYXJzZXIvLi9zcmMvdGFnL2hhbmRsZXJzL1RhZ0hhbmRsZXJJdGFsaWMudHMiLCJ3ZWJwYWNrOi8vYmJjb2RlLXBhcnNlci8uL3NyYy90YWcvaGFuZGxlcnMvVGFnSGFuZGxlckNvbG9yLnRzIiwid2VicGFjazovL2JiY29kZS1wYXJzZXIvLi9zcmMvdGFnL2hhbmRsZXJzL1RhZ0hhbmRsZXJNYXNrLnRzIiwid2VicGFjazovL2JiY29kZS1wYXJzZXIvLi9zcmMvdGFnL2hhbmRsZXJzL1RhZ0hhbmRsZXJDb2xsYXBzZS50cyIsIndlYnBhY2s6Ly9iYmNvZGUtcGFyc2VyLy4vc3JjL3RhZy9oYW5kbGVycy9UYWdIYW5kbGVyRGljZS50cyIsIndlYnBhY2s6Ly9iYmNvZGUtcGFyc2VyLy4vc3JjL3RhZy9oYW5kbGVycy9UYWdIYW5kbGVyVW5kZXJsaW5lLnRzIiwid2VicGFjazovL2JiY29kZS1wYXJzZXIvLi9zcmMvdGFnL2hhbmRsZXJzL1RhZ0hhbmRsZXJTdHJpa2UudHMiLCJ3ZWJwYWNrOi8vYmJjb2RlLXBhcnNlci8uL3NyYy90YWcvaGFuZGxlcnMvVGFnSGFuZGxlckltYWdlLnRzIiwid2VicGFjazovL2JiY29kZS1wYXJzZXIvLi9zcmMvdGFnL2hhbmRsZXJzL1RhZ0hhbmRsZXJIb3Jpem9udGFsUnVsZS50cyIsIndlYnBhY2s6Ly9iYmNvZGUtcGFyc2VyLy4vc3JjL2luZGV4LnRzIl0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJnIiwiZ2xvYmFsVGhpcyIsInRoaXMiLCJGdW5jdGlvbiIsImUiLCJ3aW5kb3ciLCJUQUdfSEFORExFUl9NQVAiLCJUQUdfQUxJQVNFU19NQVAiLCJ0cmFuc2Zvcm1Bc0lzIiwidGFnTmFtZSIsImFyZyIsImNvbnRlbnQiLCJ0cmFuc2Zvcm1UYWciLCJ0YWdMYWJlbCIsInN1YnN0cmluZyIsImhhbmRsZXIiLCJyZXN1bHQiLCJlbmNvZGVUb0h0bWwiLCJmaWx0ZXJYU1MiLCJzdHIiLCJyZXBsYWNlIiwicmVnaXN0ZXJUYWdIYW5kbGVyIiwiZ2V0SGFuZGxlciIsImJiY29kZTJodG1sIiwicmF3Q29udGVudCIsInN0YWNrIiwic3RhdGUiLCJCQkNPREVQYXJzZXIiLCJTVEFURV9OT1JNQUwiLCJ0bXAiLCJpZHgiLCJsZW5ndGgiLCJjaGFyIiwicHVzaCIsInR5cGUiLCJUWVBFX1RFWFQiLCJ2YWx1ZSIsIlNUQVRFX0JCQ09ERV9DTE9TRV9TVEFSVCIsIlNUQVRFX0JCQ09ERV9PUEVOX1NUQVJUIiwidGFnIiwiYXJnSWR4IiwiaW5kZXhPZiIsImlzU2VsZkNsb3NlIiwiVFlQRV9CQkNPREVfT1BFTiIsInN1Y2Nlc3NDbG9zZWQiLCJvdXQiLCJwb3AiLCJub2RlIiwidW5kZWZpbmVkIiwiY29uc29sZSIsImxvZyIsImh0bWwyYmJjb2RlIiwiaHRtbCIsIkFycmF5IiwiZnJvbSIsIkRPTVBhcnNlciIsInBhcnNlRnJvbVN0cmluZyIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwiY2hpbGROb2RlcyIsImRvbSIsInJlc2xvdmVOb2RlIiwibm9kZXMiLCJpc0FycmF5IiwiTm9kZUxpc3QiLCJIVE1MQ29sbGVjdGlvbiIsIm5vZGVUeXBlIiwiRUxFTUVOVF9OT0RFIiwidG9Mb3dlckNhc2UiLCJiYmNvZGVUYWciLCJnZXRBdHRyaWJ1dGUiLCJkZWNvZGVGcm9tSHRtbCIsImJpbmQiLCJURVhUX05PREUiLCJ0ZXh0Q29udGVudCIsInNwbGl0QXJncyIsInJhd0FyZyIsInNwbGl0IiwidGFnQWxpYXNlcyIsImVsZW1lbnQiLCJyZXNsb3ZlRnVuIiwiVGFnSGFuZGxlciIsIm1hdGNoIiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsIk1hdGgiLCJyb3VuZCIsInJhbmRvbSIsImFyZ3MiLCJkZWZhdWx0QkJDb2RlUGFyc2VyIiwiVGFnSGFuZGxlckJvbGQiLCJUYWdIYW5kbGVySXRhbGljIiwiVGFnSGFuZGxlclVuZGVybGluZSIsIlRhZ0hhbmRsZXJTdHJpa2UiLCJUYWdIYW5kbGVyQ29sb3IiLCJUYWdIYW5kbGVyTWFzayIsIlRhZ0hhbmRsZXJDb2xsYXBzZSIsIlRhZ0hhbmRsZXJEaWNlIiwiVGFnSGFuZGxlckltYWdlIiwiVGFnSGFuZGxlckhvcml6b250YWxSdWxlIiwiQkJDT0RFIiwibmV3UGFyc2VyIiwiZGVmYXVsdFBhcnNlciJdLCJtYXBwaW5ncyI6Im1CQUNBLElBQUlBLEVBQXNCLEdDRDFCQSxFQUFvQkMsRUFBSSxXQUN2QixHQUEwQixpQkFBZkMsV0FBeUIsT0FBT0EsV0FDM0MsSUFDQyxPQUFPQyxNQUFRLElBQUlDLFNBQVMsY0FBYixHQUNkLE1BQU9DLEdBQ1IsR0FBc0IsaUJBQVhDLE9BQXFCLE9BQU9BLFFBTGpCLEdDR3hCLEksRUFBQSwwQkFPYSxLQUFBQyxnQkFBaUQsR0FDakQsS0FBQUMsZ0JBQTZDLEdBZ1AxRCxPQTlPSSxZQUFBQyxjQUFBLFNBQWNDLEVBQWlCQyxFQUFhQyxHQU94QyxNQUFPLEtBTEhELEVBQ2FELEVBQU8sSUFBSUMsRUFFZEQsR0FFSSxJQUFJRSxFQUFPLEtBQUtGLEVBQU8sS0FHN0MsWUFBQUcsYUFBQSxTQUFhQyxFQUFrQkYsRUFBaUJELEdBQ3hDQyxVQUNBQSxFQUFVLElBRWRFLEVBQVdBLEVBQVNDLFVBQVUsR0FDOUIsSUFBTUwsRUFBVVAsS0FBS0ssZ0JBQWdCTSxHQUNyQyxJQUFLSixFQUNELE9BQU9QLEtBQUtNLGNBQWNLLEVBQVVILEVBQUtDLEdBRzdDLElBQU1JLEVBQVViLEtBQUtJ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QW1CLElBQUltRSxHQUMzQ0QsRUFBb0JsRSxtQkFBbUIsSUFBSW9FLEdBQzNDRixFQUFvQmxFLG1CQUFtQixJQUFJcUUsR0FDM0NILEVBQW9CbEUsbUJBQW1CLElBQUlzRSxHQUMzQ0osRUFBb0JsRSxtQkFBbUIsSUFBSXVFLEdBQzNDTCxFQUFvQmxFLG1CQUFtQixJQUFJd0UsR0FDM0NOLEVBQW9CbEUsbUJBQW1CLElBQUl5RSxHQUMzQ1AsRUFBb0JsRSxtQkFBbUIsSUFBSTBFLEdBQzNDUixFQUFvQmxFLG1CQUFtQixJQUFJMkUsR0FDM0NULEVBQW9CbEUsbUJBQW1CLElBQUk0RSxHQUszQyxFQUFBakcsRUFBT2tHLE9BQVMsQ0FDWkMsVUFBVyxXQUNQLE9BQU8sSUFBSXhFLEdBRWZ5RSxjQUFlYixFQUNmaEUsWUFBYSxTQUFVQyxHQUNuQixPQUFPK0QsRUFBb0JoRSxZQUFZQyxJQUUzQzJCLFlBQWEsU0FBVUMsR0FDbkIsT0FBT21DLEVBQW9CcEMsWUFBWUMsTSIsImZpbGUiOiJiYmNvZGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiX193ZWJwYWNrX3JlcXVpcmVfXy5nID0gKGZ1bmN0aW9uKCkge1xuXHRpZiAodHlwZW9mIGdsb2JhbFRoaXMgPT09ICdvYmplY3QnKSByZXR1cm4gZ2xvYmFsVGhpcztcblx0dHJ5IHtcblx0XHRyZXR1cm4gdGhpcyB8fCBuZXcgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblx0fSBjYXRjaCAoZSkge1xuXHRcdGlmICh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JykgcmV0dXJuIHdpbmRvdztcblx0fVxufSkoKTsiLCJpbXBvcnQgeyBUYWdIYW5kbGVyIH0gZnJvbSAnLi90YWcvVGFnSGFuZGxlcic7XHJcblxyXG5cclxuZXhwb3J0IGNsYXNzIEJCQ09ERVBhcnNlciB7XHJcbiAgICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBTVEFURV9OT1JNQUwgPSAwO1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgU1RBVEVfQkJDT0RFX09QRU5fU1RBUlQgPSAxO1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgU1RBVEVfQkJDT0RFX0NMT1NFX1NUQVJUID0gMjtcclxuICAgIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IFRZUEVfVEVYVCA9IDA7XHJcbiAgICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBUWVBFX0JCQ09ERV9PUEVOID0gMTtcclxuXHJcbiAgICByZWFkb25seSBUQUdfSEFORExFUl9NQVA6IHsgW2tleTogc3RyaW5nXTogVGFnSGFuZGxlciB9ID0ge307XHJcbiAgICByZWFkb25seSBUQUdfQUxJQVNFU19NQVA6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH0gPSB7fTtcclxuXHJcbiAgICB0cmFuc2Zvcm1Bc0lzKHRhZ05hbWU6IHN0cmluZywgYXJnOiBzdHJpbmcsIGNvbnRlbnQ6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgbGV0IG9wZW5UYWcgPSAnJztcclxuICAgICAgICBpZiAoYXJnKSB7XHJcbiAgICAgICAgICAgIG9wZW5UYWcgPSBgJHt0YWdOYW1lfT0ke2FyZ31gO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIG9wZW5UYWcgPSB0YWdOYW1lO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYFske29wZW5UYWd9XSR7Y29udGVudH1bLyR7dGFnTmFtZX1dYDtcclxuICAgIH1cclxuXHJcbiAgICB0cmFuc2Zvcm1UYWcodGFnTGFiZWw6IHN0cmluZywgY29udGVudDogc3RyaW5nLCBhcmc6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgaWYgKGNvbnRlbnQgPT09IHVuZGVmaW5lZCB8fCBjb250ZW50ID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGNvbnRlbnQgPSAnJztcclxuICAgICAgICB9XHJcbiAgICAgICAgdGFnTGFiZWwgPSB0YWdMYWJlbC5zdWJzdHJpbmcoMSk7XHJcbiAgICAgICAgY29uc3QgdGFnTmFtZSA9IHRoaXMuVEFHX0FMSUFTRVNfTUFQW3RhZ0xhYmVsXTtcclxuICAgICAgICBpZiAoIXRhZ05hbWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudHJhbnNmb3JtQXNJcyh0YWdMYWJlbCwgYXJnLCBjb250ZW50KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGhhbmRsZXIgPSB0aGlzLlRBR19IQU5ETEVSX01BUFt0YWdOYW1lXTtcclxuICAgICAgICBpZiAoaGFuZGxlcikge1xyXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBoYW5kbGVyLmVuY29kZVRvSHRtbCh0YWdOYW1lLCBhcmcsIGNvbnRlbnQpO1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIHJlc3VsdCA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudHJhbnNmb3JtQXNJcyh0YWdOYW1lLCBhcmcsIGNvbnRlbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIGZpbHRlclhTUyhzdHI6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIHN0clxyXG4gICAgICAgICAgICAucmVwbGFjZSgvJi9nLCAnJmFtcDsnKVxyXG4gICAgICAgICAgICAucmVwbGFjZSgvPC9nLCAnJmx0OycpXHJcbiAgICAgICAgICAgIC5yZXBsYWNlKC8+L2csICcmZ3Q7JylcclxuICAgICAgICAgICAgLnJlcGxhY2UoL1wiL2csICcmcXVvdDsnKVxyXG4gICAgICAgICAgICAucmVwbGFjZSgvJy9nLCAnJiMzOTsnKTtcclxuICAgIH1cclxuXHJcbiAgICByZWdpc3RlclRhZ0hhbmRsZXIoaGFuZGxlcjogVGFnSGFuZGxlcikge1xyXG4gICAgICAgIHRoaXMuVEFHX0hBTkRMRVJfTUFQW2hhbmRsZXIudGFnTmFtZSgpXSA9IGhhbmRsZXI7XHJcbiAgICAgICAgdGhpcy5UQUdfQUxJQVNFU19NQVBbaGFuZGxlci50YWdOYW1lKCldID0gaGFuZGxlci50YWdOYW1lKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXRIYW5kbGVyKHRhZ05hbWU6IHN0cmluZykge1xyXG4gICAgICAgIHRhZ05hbWUgPSB0aGlzLlRBR19BTElBU0VTX01BUFt0YWdOYW1lXTtcclxuICAgICAgICByZXR1cm4gdGhpcy5UQUdfSEFORExFUl9NQVBbdGFnTmFtZV07XHJcbiAgICB9XHJcblxyXG4vLyBUT0RPIOiHquWumuS5ieino+aekO+8muagh+etvuWGhemDqOW1jOWll+eahOaJgOacieS4nOilv+mDveS6pOe7meiHquWumuS5ieino+aekOWZqO+8jOWPr+S7peiHquihjOWkhOeQhuWGheWuueino+aekOOAgueUqOmAlO+8mltjb2RlXVsvY29kZV3jgIFbbGlzdF1bKl14eFsvbGlzdF1cclxuLy8gVE9ETyDnibnmrorop6PmnpDvvJpbY29kZV3moIfnrb7lupTor6Xlv73nlaXmraPluLjnmoTpl63lkIjmoIfnrb7vvIznm7TliLDmib7liLDkuoZbL2NvZGVd5oiW6ICF5Yiw6L6+5a2X56ym5Liy5pyr5bC+XHJcbiAgICBiYmNvZGUyaHRtbChyYXdDb250ZW50OiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgICAgIC8vIFRPRE8gYW555pS55o6l5Y+jXHJcbiAgICAgICAgY29uc3Qgc3RhY2s6IGFueVtdID0gW107XHJcbiAgICAgICAgbGV0IHN0YXRlID0gQkJDT0RFUGFyc2VyLlNUQVRFX05PUk1BTDtcclxuICAgICAgICBsZXQgdG1wID0gJyc7XHJcbiAgICAgICAgZm9yIChsZXQgaWR4ID0gMDsgaWR4IDwgcmF3Q29udGVudC5sZW5ndGg7IGlkeCsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNoYXIgPSByYXdDb250ZW50W2lkeF07XHJcbiAgICAgICAgICAgIHN3aXRjaCAoY2hhcikge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnWyc6IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdGUgPT09IEJCQ09ERVBhcnNlci5TVEFURV9OT1JNQUwgJiYgaWR4IDwgcmF3Q29udGVudC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRtcC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFjay5wdXNoKHt0eXBlOiBCQkNPREVQYXJzZXIuVFlQRV9URVhULCB2YWx1ZTogdG1wLnJlcGxhY2UoLyAvZywgJyZuYnNwOycpfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bXAgPSAnJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0bXAgPSAnWyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyYXdDb250ZW50W2lkeCArIDFdID09PSAnLycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlID0gQkJDT0RFUGFyc2VyLlNUQVRFX0JCQ09ERV9DTE9TRV9TVEFSVDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcCArPSAnLyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHgrKztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlID0gQkJDT0RFUGFyc2VyLlNUQVRFX0JCQ09ERV9PUEVOX1NUQVJUO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzdGF0ZSA9PT0gQkJDT0RFUGFyc2VyLlNUQVRFX0JCQ09ERV9PUEVOX1NUQVJUIHx8IHN0YXRlID09PSBCQkNPREVQYXJzZXIuU1RBVEVfQkJDT0RFX0NMT1NFX1NUQVJUKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0bXAubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhY2sucHVzaCh7dHlwZTogQkJDT0RFUGFyc2VyLlRZUEVfVEVYVCwgdmFsdWU6IHRtcC5yZXBsYWNlKC8gL2csICcmbmJzcDsnKX0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG1wID0gJ1snO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG1wICs9IGNoYXI7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2FzZSAnXSc6IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdGUgPT09IEJCQ09ERVBhcnNlci5TVEFURV9CQkNPREVfT1BFTl9TVEFSVCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgdGFnID0gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBhcmcgPSAnJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGFyZ0lkeCA9IHRtcC5pbmRleE9mKCc9Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhcmdJZHggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmcgPSB0bXAuc3Vic3RyaW5nKGFyZ0lkeCArIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFnID0gdG1wLnN1YnN0cmluZygwLCBhcmdJZHgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFnID0gdG1wO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGhhbmRsZXIgPSB0aGlzLmdldEhhbmRsZXIodGFnLnN1YnN0cmluZygxKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoYW5kbGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGFuZGxlci5pc1NlbGZDbG9zZSgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhY2sucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IEJCQ09ERVBhcnNlci5UWVBFX1RFWFQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB0aGlzLnRyYW5zZm9ybVRhZyh0YWcsICcnLCBhcmcucmVwbGFjZSgvIC9nLCAnJm5ic3A7JykpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YWNrLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBCQkNPREVQYXJzZXIuVFlQRV9CQkNPREVfT1BFTixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHRhZyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJnOiBhcmcucmVwbGFjZSgvIC9nLCAnJm5ic3A7JylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcCA9ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG1wICs9ICddJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZSA9IEJCQ09ERVBhcnNlci5TVEFURV9OT1JNQUw7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzdGF0ZSA9PT0gQkJDT0RFUGFyc2VyLlNUQVRFX0JCQ09ERV9DTE9TRV9TVEFSVCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0YWcgPSB0bXAuc3Vic3RyaW5nKDIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBoYW5kbGVyID0gdGhpcy5nZXRIYW5kbGVyKHRhZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoYW5kbGVyICYmICFoYW5kbGVyLmlzU2VsZkNsb3NlKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjb250ZW50ID0gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgc3VjY2Vzc0Nsb3NlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0OiB3aGlsZSAodHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5vZGUgPSBzdGFjay5wb3AoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW5vZGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAobm9kZS50eXBlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgQkJDT0RFUGFyc2VyLlRZUEVfVEVYVDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudCA9IG5vZGUudmFsdWUgKyBjb250ZW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBCQkNPREVQYXJzZXIuVFlQRV9CQkNPREVfT1BFTjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vZGUudmFsdWUuc3Vic3RyaW5nKDEpID09PSB0bXAuc3Vic3RyaW5nKDIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhY2sucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IEJCQ09ERVBhcnNlci5UWVBFX1RFWFQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB0aGlzLnRyYW5zZm9ybVRhZyhub2RlLnZhbHVlLCBjb250ZW50LCBub2RlLmFyZylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50ID0gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2Vzc0Nsb3NlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsgb3V0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50ID0gdGhpcy50cmFuc2Zvcm1UYWcobm9kZS52YWx1ZSwgY29udGVudCwgbm9kZS5hcmcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFzdWNjZXNzQ2xvc2VkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudCArPSB0bXAgKyAnXSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29udGVudC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhY2sucHVzaCh7dHlwZTogQkJDT0RFUGFyc2VyLlRZUEVfVEVYVCwgdmFsdWU6IGNvbnRlbnR9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcCA9ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUgPSBCQkNPREVQYXJzZXIuU1RBVEVfTk9STUFMO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG1wICs9ICddJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlID0gQkJDT0RFUGFyc2VyLlNUQVRFX05PUk1BTDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRtcCArPSBjaGFyO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhc2UgJ1xcbic6IHtcclxuICAgICAgICAgICAgICAgICAgICB0bXAgKz0gJzxici8+JztcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHtcclxuICAgICAgICAgICAgICAgICAgICB0bXAgKz0gY2hhcjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgcmVzdWx0ID0gJyc7XHJcbiAgICAgICAgbGV0IG5vZGUgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgd2hpbGUgKG5vZGUgPSBzdGFjay5wb3AoKSkge1xyXG4gICAgICAgICAgICBpZiAobm9kZS50eXBlID09PSBCQkNPREVQYXJzZXIuVFlQRV9CQkNPREVfT1BFTikge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRtcC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9IHRtcDtcclxuICAgICAgICAgICAgICAgICAgICB0bXAgPSAnJztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMudHJhbnNmb3JtVGFnKG5vZGUudmFsdWUsIHJlc3VsdCwgbm9kZS5hcmcpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKG5vZGUudHlwZSA9PT0gQkJDT0RFUGFyc2VyLlRZUEVfVEVYVCkge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gbm9kZS52YWx1ZSArIHJlc3VsdDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodG1wLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgcmVzdWx0ICs9IHRtcDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIGh0bWwyYmJjb2RlKGh0bWw6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgbGV0IGRvbUxpc3QgPSBBcnJheS5mcm9tKG5ldyBET01QYXJzZXIoKS5wYXJzZUZyb21TdHJpbmcoaHRtbCwgJ3RleHQvaHRtbCcpLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdib2R5JylbMF0uY2hpbGROb2Rlcyk7XHJcbiAgICAgICAgbGV0IHJlc3VsdCA9ICcnO1xyXG4gICAgICAgIGZvciAoY29uc3QgZG9tIG9mIGRvbUxpc3QpIHtcclxuICAgICAgICAgICAgcmVzdWx0ICs9IHRoaXMucmVzbG92ZU5vZGUoZG9tKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHJlc2xvdmVOb2RlKG5vZGVzOiBOb2Rlcyk6IHN0cmluZyB7XHJcbiAgICAgICAgbGV0IHJlc3VsdCA9ICcnO1xyXG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShub2RlcykpIHtcclxuICAgICAgICAgICAgaWYgKG5vZGVzIGluc3RhbmNlb2YgTm9kZUxpc3QgfHwgbm9kZXMgaW5zdGFuY2VvZiBIVE1MQ29sbGVjdGlvbikge1xyXG4gICAgICAgICAgICAgICAgbm9kZXMgPSBBcnJheS5mcm9tKG5vZGVzKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG5vZGVzID0gW25vZGVzXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKGNvbnN0IG5vZGUgb2Ygbm9kZXMpIHtcclxuICAgICAgICAgICAgc3dpdGNoIChub2RlLm5vZGVUeXBlKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIG5vZGUuRUxFTUVOVF9OT0RFOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9IG5vZGUgYXMgRWxlbWVudDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZS50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdicicpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICdcXG4nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGJiY29kZVRhZyA9IGUuZ2V0QXR0cmlidXRlKCdkYXRhLWJiY29kZS10YWcnKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWJiY29kZVRhZykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYmNvZGVUYWcgPSBlLnRhZ05hbWUudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaGFuZGxlciA9IHRoaXMuZ2V0SGFuZGxlcihiYmNvZGVUYWcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChoYW5kbGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSBoYW5kbGVyLmRlY29kZUZyb21IdG1sKGUsIHRoaXMucmVzbG92ZU5vZGUuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9IHRoaXMucmVzbG92ZU5vZGUoQXJyYXkuZnJvbShub2RlLmNoaWxkTm9kZXMpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXNlIG5vZGUuVEVYVF9OT0RFOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9IG5vZGUudGV4dENvbnRlbnQucmVwbGFjZSgvW1xcblxcciBdL2csICcnKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxufVxyXG4iLCJleHBvcnQgYWJzdHJhY3QgY2xhc3MgVGFnSGFuZGxlciB7XHJcbiAgICBhYnN0cmFjdCB0YWdOYW1lKCk6IHN0cmluZztcclxuICAgIGFic3RyYWN0IHRhZ0FsaWFzZXMoKTogc3RyaW5nW107XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmmK/lkKbmmK/oh6rlhbPpl63moIfnrb7vvIzlr7nkuo7oh6rlhbPpl63moIfnrb7kvJrmjIljb250ZW505Li656m677yM5Zyob3BlbiB0YWfnu5PmnZ/lkI7nq4vliLvop6PmnpBcclxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59XHJcbiAgICAgKi9cclxuICAgIGlzU2VsZkNsb3NlKCkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdGFnTGFiZWwg55So5oi36L6T5YWl55qEdGFnTmFtZVxyXG4gICAgICogQHBhcmFtIGFyZyDnlKjmiLflnKhvcGVuIHRhZ+S4reWGmeeahOWPguaVsFxyXG4gICAgICogQHBhcmFtIGNvbnRlbnQg5byA6Zet5qCH562+5Lit6Ze055qE5YaF5a6577yM6ZyA6KaB5rOo5oSP55qE5piv5Zyo5bWM5aWX5qCH562+55qE5oOF5Ya15LiL77yM5aSW5bGC5qCH562+5b6X5Yiw55qEY29udGVudOaYr+W3sue7j+iiq+WGheWxguagh+etvuWkhOeQhuWujOS5i+WQjueahOe7k+aenFxyXG4gICAgICovXHJcbiAgICBhYnN0cmFjdCBlbmNvZGVUb0h0bWwodGFnTGFiZWw6IHN0cmluZywgYXJnOiBzdHJpbmcsIGNvbnRlbnQ6IHN0cmluZyk6IHN0cmluZ3xmYWxzZTtcclxuICAgIGFic3RyYWN0IGRlY29kZUZyb21IdG1sKGVsZW1lbnQ6IEVsZW1lbnQsIHJlc2xvdmVGdW46IChub2RlOiBOb2RlcykgPT4gc3RyaW5nKTogc3RyaW5nfGZhbHNlO1xyXG5cclxuICAgIHNwbGl0QXJncyhyYXdBcmc6IHN0cmluZyk6IHN0cmluZ1tdIHtcclxuICAgICAgICByZXR1cm4gcmF3QXJnLnNwbGl0KCc7Jyk7XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG4iLCJpbXBvcnQgeyBUYWdIYW5kbGVyIH0gZnJvbSAnLi4vVGFnSGFuZGxlcic7XHJcblxyXG5leHBvcnQgY2xhc3MgVGFnSGFuZGxlckJvbGQgZXh0ZW5kcyBUYWdIYW5kbGVyIHtcclxuICAgIHRhZ05hbWUoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gJ2InO1xyXG4gICAgfTtcclxuXHJcbiAgICB0YWdBbGlhc2VzKCk6IHN0cmluZ1tdIHtcclxuICAgICAgICByZXR1cm4gW107XHJcbiAgICB9O1xyXG5cclxuICAgIGVuY29kZVRvSHRtbCh0YWdMYWJlbDogc3RyaW5nLCBhcmc6IHN0cmluZywgY29udGVudDogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgICAgICBpZiAoIWNvbnRlbnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYDwke3RoaXMudGFnTmFtZSgpfT4ke2NvbnRlbnR9PC8ke3RoaXMudGFnTmFtZSgpfT5gO1xyXG4gICAgfVxyXG5cclxuICAgIGRlY29kZUZyb21IdG1sKGVsZW1lbnQ6IEVsZW1lbnQsIHJlc2xvdmVGdW46IChub2RlOiBOb2RlcykgPT4gc3RyaW5nKTogc3RyaW5nIHwgZmFsc2Uge1xyXG4gICAgICAgIHJldHVybiBgW2JdJHtyZXNsb3ZlRnVuKGVsZW1lbnQuY2hpbGROb2Rlcyl9Wy9iXWA7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgVGFnSGFuZGxlciB9IGZyb20gJy4uL1RhZ0hhbmRsZXInO1xyXG5cclxuZXhwb3J0IGNsYXNzIFRhZ0hhbmRsZXJJdGFsaWMgZXh0ZW5kcyBUYWdIYW5kbGVyIHtcclxuICAgIHRhZ05hbWUoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gJ2knO1xyXG4gICAgfTtcclxuXHJcbiAgICB0YWdBbGlhc2VzKCk6IHN0cmluZ1tdIHtcclxuICAgICAgICByZXR1cm4gW107XHJcbiAgICB9O1xyXG5cclxuICAgIGVuY29kZVRvSHRtbCh0YWdMYWJlbDogc3RyaW5nLCBhcmc6IHN0cmluZywgY29udGVudDogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgICAgICBpZiAoIWNvbnRlbnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYDwke3RoaXMudGFnTmFtZSgpfT4ke2NvbnRlbnR9PC8ke3RoaXMudGFnTmFtZSgpfT5gO1xyXG4gICAgfVxyXG5cclxuICAgIGRlY29kZUZyb21IdG1sKGVsZW1lbnQ6IEVsZW1lbnQsIHJlc2xvdmVGdW46IChub2RlOiBOb2RlcykgPT4gc3RyaW5nKTogc3RyaW5nIHwgZmFsc2Uge1xyXG4gICAgICAgIHJldHVybiBgW2ldJHtyZXNsb3ZlRnVuKGVsZW1lbnQuY2hpbGROb2Rlcyl9Wy9pXWA7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgVGFnSGFuZGxlciB9IGZyb20gJy4uL1RhZ0hhbmRsZXInO1xyXG5cclxuZXhwb3J0IGNsYXNzIFRhZ0hhbmRsZXJDb2xvciBleHRlbmRzIFRhZ0hhbmRsZXIge1xyXG4gICAgdGFnTmFtZSgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiAnY29sb3InO1xyXG4gICAgfTtcclxuXHJcbiAgICB0YWdBbGlhc2VzKCk6IHN0cmluZ1tdIHtcclxuICAgICAgICByZXR1cm4gW107XHJcbiAgICB9O1xyXG5cclxuICAgIGVuY29kZVRvSHRtbCh0YWdMYWJlbDogc3RyaW5nLCBhcmc6IHN0cmluZywgY29udGVudDogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgICAgICBpZiAoIWNvbnRlbnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIWFyZykge1xyXG4gICAgICAgICAgICByZXR1cm4gY29udGVudDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGFyZy5tYXRjaCgvXlswLTlhLWZBLUZdezZ9JC8pKSB7XHJcbiAgICAgICAgICAgIGFyZyA9ICcjJyArIGFyZztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGA8ZGl2IHN0eWxlPVwiY29sb3I6JHthcmd9O2Rpc3BsYXk6IGlubGluZS1ibG9ja1wiPiR7Y29udGVudH08L2Rpdj5gO1xyXG4gICAgfVxyXG5cclxuICAgIGRlY29kZUZyb21IdG1sKGVsZW1lbnQ6IEVsZW1lbnQsIHJlc2xvdmVGdW46IChub2RlOiBOb2RlcykgPT4gc3RyaW5nKTogc3RyaW5nIHwgZmFsc2Uge1xyXG4gICAgICAgIHJldHVybiBgW2NvbG9yPSR7ZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtYmJjb2RlLWNvbG9yJyl9XSR7cmVzbG92ZUZ1bihlbGVtZW50LmNoaWxkTm9kZXMpfVsvY29sb3JdYDtcclxuICAgIH1cclxufVxyXG5cclxuIiwiaW1wb3J0IHsgVGFnSGFuZGxlciB9IGZyb20gJy4uL1RhZ0hhbmRsZXInO1xyXG5cclxuZXhwb3J0IGNsYXNzIFRhZ0hhbmRsZXJNYXNrIGV4dGVuZHMgVGFnSGFuZGxlciB7XHJcbiAgICB0YWdOYW1lKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuICdtYXNrJztcclxuICAgIH07XHJcblxyXG4gICAgdGFnQWxpYXNlcygpOiBzdHJpbmdbXSB7XHJcbiAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgfTtcclxuXHJcbiAgICBlbmNvZGVUb0h0bWwodGFnTGFiZWw6IHN0cmluZywgYXJnOiBzdHJpbmcsIGNvbnRlbnQ6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgaWYgKCFjb250ZW50KSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnJztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGA8ZGl2IGNsYXNzPVwibWFza1wiPjxzcGFuIGNsYXNzPVwiaGVpbXVcIiB0aXRsZT1cIuS9oOefpemBk+eahOWkquWkmuS6hlwiPiR7Y29udGVudH08L3NwYW4+PC9kaXY+YDtcclxuICAgIH1cclxuXHJcbiAgICBkZWNvZGVGcm9tSHRtbChlbGVtZW50OiBFbGVtZW50LCByZXNsb3ZlRnVuOiAobm9kZTogTm9kZXMpID0+IHN0cmluZyk6IHN0cmluZyB8IGZhbHNlIHtcclxuICAgICAgICByZXR1cm4gYFttYXNrXSR7cmVzbG92ZUZ1bihlbGVtZW50LmNoaWxkTm9kZXMpfVsvbWFza11gO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IFRhZ0hhbmRsZXIgfSBmcm9tICcuLi9UYWdIYW5kbGVyJztcclxuXHJcbmV4cG9ydCBjbGFzcyBUYWdIYW5kbGVyQ29sbGFwc2UgZXh0ZW5kcyBUYWdIYW5kbGVyIHtcclxuICAgIHRhZ05hbWUoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gJ2NvbGxhcHNlJztcclxuICAgIH07XHJcblxyXG4gICAgdGFnQWxpYXNlcygpOiBzdHJpbmdbXSB7XHJcbiAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgfTtcclxuXHJcbiAgICBlbmNvZGVUb0h0bWwodGFnTGFiZWw6IHN0cmluZywgYXJnOiBzdHJpbmcsIGNvbnRlbnQ6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgaWYgKCFhcmcpIHtcclxuICAgICAgICAgICAgYXJnID0gXCLngrnlh7vlsZXlvIBcIlxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoYXJnLmluZGV4T2YoJ3RpdGxlPScpID09PSAwKSB7XHJcbiAgICAgICAgICAgIGFyZyA9IGFyZy5zdWJzdHJpbmcoNik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBgPGRpdj48ZGV0YWlscz48c3VtbWFyeT48Yj4ke2FyZ308L2I+PC9zdW1tYXJ5PjxwPiR7Y29udGVudH08L3A+PC9kZXRhaWxzPjwvZGl2PmA7XHJcbiAgICB9XHJcblxyXG4gICAgZGVjb2RlRnJvbUh0bWwoZWxlbWVudDogRWxlbWVudCwgcmVzbG92ZUZ1bjogKG5vZGU6IE5vZGVzKSA9PiBzdHJpbmcpOiBzdHJpbmcgfCBmYWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIGBbY29sbGFwc2VdJHtyZXNsb3ZlRnVuKGVsZW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnY29sbGFwc2UtY29udGVudCcpKX1bL2NvbGxhcHNlXWA7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgVGFnSGFuZGxlciB9IGZyb20gJy4uL1RhZ0hhbmRsZXInO1xyXG5cclxuZXhwb3J0IGNsYXNzIFRhZ0hhbmRsZXJEaWNlIGV4dGVuZHMgVGFnSGFuZGxlciB7XHJcbiAgICB0YWdOYW1lKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuICdkaWNlJztcclxuICAgIH07XHJcblxyXG4gICAgdGFnQWxpYXNlcygpOiBzdHJpbmdbXSB7XHJcbiAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgfTtcclxuXHJcbiAgICBlbmNvZGVUb0h0bWwodGFnTGFiZWw6IHN0cmluZywgYXJnOiBzdHJpbmcsIGNvbnRlbnQ6IHN0cmluZyk6IHN0cmluZ3xmYWxzZSB7XHJcbiAgICAgICAgaWYgKCFjb250ZW50KSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnJztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGNvbnRlbnQubWF0Y2goL14oKFxcZCspfChcXGQqZFxcZCspKShcXCsoKFxcZCspfChcXGQqZFxcZCspKSkqJC8pKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBgPGRpdiBjbGFzcz1cImRpY2VcIj7lgYfoo4XmnInpqrDlqJjvvJoke2NvbnRlbnR9PSR7TWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogMjAwKX08L2Rpdj5gO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgZGVjb2RlRnJvbUh0bWwoZWxlbWVudDogRWxlbWVudCwgcmVzbG92ZUZ1bjogKG5vZGU6IE5vZGVzKSA9PiBzdHJpbmcpOiBzdHJpbmcgfCBmYWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIGBESUNFIFRPRE9gO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IFRhZ0hhbmRsZXIgfSBmcm9tICcuLi9UYWdIYW5kbGVyJztcclxuXHJcbmV4cG9ydCBjbGFzcyBUYWdIYW5kbGVyVW5kZXJsaW5lIGV4dGVuZHMgVGFnSGFuZGxlciB7XHJcbiAgICB0YWdOYW1lKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuICd1JztcclxuICAgIH07XHJcblxyXG4gICAgdGFnQWxpYXNlcygpOiBzdHJpbmdbXSB7XHJcbiAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgfTtcclxuXHJcbiAgICBlbmNvZGVUb0h0bWwodGFnTGFiZWw6IHN0cmluZywgYXJnOiBzdHJpbmcsIGNvbnRlbnQ6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgaWYgKCFjb250ZW50KSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnJztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGA8JHt0aGlzLnRhZ05hbWUoKX0+JHtjb250ZW50fTwvJHt0aGlzLnRhZ05hbWUoKX0+YDtcclxuICAgIH1cclxuXHJcbiAgICBkZWNvZGVGcm9tSHRtbChlbGVtZW50OiBFbGVtZW50LCByZXNsb3ZlRnVuOiAobm9kZTogTm9kZXMpID0+IHN0cmluZyk6IHN0cmluZyB8IGZhbHNlIHtcclxuICAgICAgICByZXR1cm4gYFt1XSR7cmVzbG92ZUZ1bihlbGVtZW50LmNoaWxkTm9kZXMpfVsvdV1gO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IFRhZ0hhbmRsZXIgfSBmcm9tICcuLi9UYWdIYW5kbGVyJztcclxuXHJcbmV4cG9ydCBjbGFzcyBUYWdIYW5kbGVyU3RyaWtlIGV4dGVuZHMgVGFnSGFuZGxlciB7XHJcbiAgICB0YWdOYW1lKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuICdzJztcclxuICAgIH07XHJcblxyXG4gICAgdGFnQWxpYXNlcygpOiBzdHJpbmdbXSB7XHJcbiAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgfTtcclxuXHJcbiAgICBlbmNvZGVUb0h0bWwodGFnTGFiZWw6IHN0cmluZywgYXJnOiBzdHJpbmcsIGNvbnRlbnQ6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgaWYgKCFjb250ZW50KSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnJztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGA8JHt0aGlzLnRhZ05hbWUoKX0+JHtjb250ZW50fTwvJHt0aGlzLnRhZ05hbWUoKX0+YDtcclxuICAgIH1cclxuXHJcbiAgICBkZWNvZGVGcm9tSHRtbChlbGVtZW50OiBFbGVtZW50LCByZXNsb3ZlRnVuOiAobm9kZTogTm9kZXMpID0+IHN0cmluZyk6IHN0cmluZyB8IGZhbHNlIHtcclxuICAgICAgICByZXR1cm4gYFtzXSR7cmVzbG92ZUZ1bihlbGVtZW50LmNoaWxkTm9kZXMpfVsvc11gO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IFRhZ0hhbmRsZXIgfSBmcm9tICcuLi9UYWdIYW5kbGVyJztcclxuXHJcbmV4cG9ydCBjbGFzcyBUYWdIYW5kbGVySW1hZ2UgZXh0ZW5kcyBUYWdIYW5kbGVyIHtcclxuICAgIHRhZ05hbWUoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gJ2ltZyc7XHJcbiAgICB9O1xyXG5cclxuICAgIHRhZ0FsaWFzZXMoKTogc3RyaW5nW10ge1xyXG4gICAgICAgIHJldHVybiBbXTtcclxuICAgIH07XHJcblxyXG4gICAgaXNTZWxmQ2xvc2UoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgZW5jb2RlVG9IdG1sKHRhZ0xhYmVsOiBzdHJpbmcsIGFyZzogc3RyaW5nLCBjb250ZW50OiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgICAgIGNvbnN0IGFyZ3MgPSB0aGlzLnNwbGl0QXJncyhhcmcpO1xyXG4gICAgICAgIGNvbnN0IHNyYyA9IGFyZ3NbMF07XHJcbiAgICAgICAgY29uc3Qgd2lkdGggPSBhcmdzLmxlbmd0aCA+IDEgPyBhcmdzWzFdIDogJyc7XHJcbiAgICAgICAgY29uc3QgaGVpZ2h0ID0gYXJncy5sZW5ndGggPiAyID8gYXJnc1syXSA6ICcnO1xyXG4gICAgICAgIGNvbnN0IG1hcmdpbkggPSBhcmdzLmxlbmd0aCA+IDMgPyBhcmdzWzNdIDogJyc7XHJcbiAgICAgICAgY29uc3QgbWFyZ2luViA9IGFyZ3MubGVuZ3RoID4gNCA/IGFyZ3NbNF0gOiAnJztcclxuICAgICAgICBjb25zdCBmbG9hdCA9IGFyZ3MubGVuZ3RoID4gNSA/IGFyZ3NbNV0gOiAnJztcclxuXHJcbiAgICAgICAgcmV0dXJuIGA8JHt0aGlzLnRhZ05hbWUoKX0gc3JjPVwiJHthcmd9XCIvPmA7XHJcbiAgICB9XHJcblxyXG4gICAgZGVjb2RlRnJvbUh0bWwoZWxlbWVudDogRWxlbWVudCwgcmVzbG92ZUZ1bjogKG5vZGU6IE5vZGVzKSA9PiBzdHJpbmcpOiBzdHJpbmcgfCBmYWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIGBbaW1nPSR7ZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ3NyYycpfV1gO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IFRhZ0hhbmRsZXIgfSBmcm9tICcuLi9UYWdIYW5kbGVyJztcclxuXHJcbmV4cG9ydCBjbGFzcyBUYWdIYW5kbGVySG9yaXpvbnRhbFJ1bGUgZXh0ZW5kcyBUYWdIYW5kbGVyIHtcclxuICAgIHRhZ05hbWUoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gJ2hyJztcclxuICAgIH07XHJcblxyXG4gICAgdGFnQWxpYXNlcygpOiBzdHJpbmdbXSB7XHJcbiAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgfTtcclxuXHJcbiAgICBpc1NlbGZDbG9zZSgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBlbmNvZGVUb0h0bWwodGFnTGFiZWw6IHN0cmluZywgYXJnOiBzdHJpbmcsIGNvbnRlbnQ6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuICc8aHIvPic7XHJcbiAgICB9XHJcblxyXG4gICAgZGVjb2RlRnJvbUh0bWwoZWxlbWVudDogRWxlbWVudCwgcmVzbG92ZUZ1bjogKG5vZGU6IE5vZGVzKSA9PiBzdHJpbmcpOiBzdHJpbmcgfCBmYWxzZSB7XHJcbiAgICAgICAgcmV0dXJuICdbaHJdJztcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBCQkNPREVQYXJzZXIgfSBmcm9tICcuL0JCQ09ERVBhcnNlcic7XHJcbmltcG9ydCB7IFRhZ0hhbmRsZXIgfSBmcm9tICcuL3RhZy9UYWdIYW5kbGVyJztcclxuaW1wb3J0IHsgVGFnSGFuZGxlckJvbGQgfSBmcm9tICcuL3RhZy9oYW5kbGVycy9UYWdIYW5kbGVyQm9sZCc7XHJcbmltcG9ydCB7IFRhZ0hhbmRsZXJJdGFsaWMgfSBmcm9tICcuL3RhZy9oYW5kbGVycy9UYWdIYW5kbGVySXRhbGljJztcclxuaW1wb3J0IHsgVGFnSGFuZGxlckNvbG9yIH0gZnJvbSAnLi90YWcvaGFuZGxlcnMvVGFnSGFuZGxlckNvbG9yJztcclxuaW1wb3J0IHsgVGFnSGFuZGxlck1hc2sgfSBmcm9tICcuL3RhZy9oYW5kbGVycy9UYWdIYW5kbGVyTWFzayc7XHJcbmltcG9ydCB7IFRhZ0hhbmRsZXJDb2xsYXBzZSB9IGZyb20gJy4vdGFnL2hhbmRsZXJzL1RhZ0hhbmRsZXJDb2xsYXBzZSc7XHJcbmltcG9ydCB7IFRhZ0hhbmRsZXJEaWNlIH0gZnJvbSAnLi90YWcvaGFuZGxlcnMvVGFnSGFuZGxlckRpY2UnO1xyXG5pbXBvcnQgeyBUYWdIYW5kbGVyVW5kZXJsaW5lIH0gZnJvbSAnLi90YWcvaGFuZGxlcnMvVGFnSGFuZGxlclVuZGVybGluZSc7XHJcbmltcG9ydCB7IFRhZ0hhbmRsZXJTdHJpa2UgfSBmcm9tICcuL3RhZy9oYW5kbGVycy9UYWdIYW5kbGVyU3RyaWtlJztcclxuaW1wb3J0IHsgVGFnSGFuZGxlckltYWdlIH0gZnJvbSAnLi90YWcvaGFuZGxlcnMvVGFnSGFuZGxlckltYWdlJztcclxuaW1wb3J0IHsgVGFnSGFuZGxlckhvcml6b250YWxSdWxlIH0gZnJvbSAnLi90YWcvaGFuZGxlcnMvVGFnSGFuZGxlckhvcml6b250YWxSdWxlJztcclxuXHJcbmNvbnN0IGRlZmF1bHRCQkNvZGVQYXJzZXIgPSBuZXcgQkJDT0RFUGFyc2VyKCk7XHJcbmRlZmF1bHRCQkNvZGVQYXJzZXIucmVnaXN0ZXJUYWdIYW5kbGVyKG5ldyBUYWdIYW5kbGVyQm9sZCgpKTtcclxuZGVmYXVsdEJCQ29kZVBhcnNlci5yZWdpc3RlclRhZ0hhbmRsZXIobmV3IFRhZ0hhbmRsZXJJdGFsaWMoKSk7XHJcbmRlZmF1bHRCQkNvZGVQYXJzZXIucmVnaXN0ZXJUYWdIYW5kbGVyKG5ldyBUYWdIYW5kbGVyVW5kZXJsaW5lKCkpO1xyXG5kZWZhdWx0QkJDb2RlUGFyc2VyLnJlZ2lzdGVyVGFnSGFuZGxlcihuZXcgVGFnSGFuZGxlclN0cmlrZSgpKTtcclxuZGVmYXVsdEJCQ29kZVBhcnNlci5yZWdpc3RlclRhZ0hhbmRsZXIobmV3IFRhZ0hhbmRsZXJDb2xvcigpKTtcclxuZGVmYXVsdEJCQ29kZVBhcnNlci5yZWdpc3RlclRhZ0hhbmRsZXIobmV3IFRhZ0hhbmRsZXJNYXNrKCkpO1xyXG5kZWZhdWx0QkJDb2RlUGFyc2VyLnJlZ2lzdGVyVGFnSGFuZGxlcihuZXcgVGFnSGFuZGxlckNvbGxhcHNlKCkpO1xyXG5kZWZhdWx0QkJDb2RlUGFyc2VyLnJlZ2lzdGVyVGFnSGFuZGxlcihuZXcgVGFnSGFuZGxlckRpY2UoKSk7XHJcbmRlZmF1bHRCQkNvZGVQYXJzZXIucmVnaXN0ZXJUYWdIYW5kbGVyKG5ldyBUYWdIYW5kbGVySW1hZ2UoKSk7XHJcbmRlZmF1bHRCQkNvZGVQYXJzZXIucmVnaXN0ZXJUYWdIYW5kbGVyKG5ldyBUYWdIYW5kbGVySG9yaXpvbnRhbFJ1bGUoKSk7XHJcblxyXG5leHBvcnQgeyBkZWZhdWx0QkJDb2RlUGFyc2VyLCBUYWdIYW5kbGVyIH07XHJcblxyXG5kZWNsYXJlIHZhciBnbG9iYWw6IGFueTtcclxuZ2xvYmFsLkJCQ09ERSA9IHtcclxuICAgIG5ld1BhcnNlcjogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgQkJDT0RFUGFyc2VyKCk7XHJcbiAgICB9LFxyXG4gICAgZGVmYXVsdFBhcnNlcjogZGVmYXVsdEJCQ29kZVBhcnNlcixcclxuICAgIGJiY29kZTJodG1sOiBmdW5jdGlvbiAocmF3Q29udGVudDogc3RyaW5nKSB7XHJcbiAgICAgICAgcmV0dXJuIGRlZmF1bHRCQkNvZGVQYXJzZXIuYmJjb2RlMmh0bWwocmF3Q29udGVudCk7XHJcbiAgICB9LFxyXG4gICAgaHRtbDJiYmNvZGU6IGZ1bmN0aW9uIChodG1sOiBzdHJpbmcpIHtcclxuICAgICAgICByZXR1cm4gZGVmYXVsdEJCQ29kZVBhcnNlci5odG1sMmJiY29kZShodG1sKTtcclxuICAgIH1cclxufTtcclxuIl0sInNvdXJjZVJvb3QiOiIifQ==