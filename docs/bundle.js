(()=>{"use strict";var t={};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}();var n,r=function(){function t(){}return t.prototype.getArg=function(t,n){},t}(),e=(n=function(t,r){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(t,r)},function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=t}n(t,r),t.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}),o=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype.tagName=function(){return"b"},n.prototype.tagAliases=function(){return[]},n.prototype.handle=function(t,n,r){return r?"<"+this.tagName()+">"+r+"</"+this.tagName()+">":""},n}(r),u=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),a=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return u(n,t),n.prototype.tagName=function(){return"i"},n.prototype.tagAliases=function(){return[]},n.prototype.handle=function(t,n,r){return r?"<"+this.tagName()+">"+r+"</"+this.tagName()+">":""},n}(r),i=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),p=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.tagName=function(){return"color"},n.prototype.tagAliases=function(){return[]},n.prototype.handle=function(t,n,r){return r?n?(n.match(/^[0-9a-fA-F]{6}$/)&&(n="#"+n),'<span style="color:'+n+'">'+r+"</span>"):r:""},n}(r),c=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),s=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return c(n,t),n.prototype.tagName=function(){return"mask"},n.prototype.tagAliases=function(){return[]},n.prototype.handle=function(t,n,r){return r?'<div class="mask"><span class="heimu" title="你知道的太多了">'+r+"</span></div>":""},n}(r),l=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),f=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return l(n,t),n.prototype.tagName=function(){return"collapse"},n.prototype.tagAliases=function(){return[]},n.prototype.handle=function(t,n,r){return n||(n="点击展开"),0===n.indexOf("title=")&&(n=n.substring(6)),"<div><details><summary><b>"+n+"</b></summary><p>"+r+"</p></details></div>"},n}(r),_=function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),y=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return _(n,t),n.prototype.tagName=function(){return"dice"},n.prototype.tagAliases=function(){return[]},n.prototype.handle=function(t,n,r){return r?!!r.match(/^((\d+)|(\d*d\d+))(\+((\d+)|(\d*d\d+)))*$/)&&'<div class="dice">假装有骰娘：'+r+"="+Math.round(200*Math.random())+"</div>":""},n}(r),T=new(function(){function t(){this.TAG_HANDLER_MAP={},this.TAG_ALIASES_MAP={}}return t.prototype.transformAsIs=function(t,n,r){return"["+(n?t+"="+n:t)+"]"+r+"[/"+t+"]"},t.prototype.transformTag=function(t,n,r){null==n&&(n=""),t=t.substring(1);var e=this.TAG_ALIASES_MAP[t];if(!e)return this.transformAsIs(t,r,n);var o=this.TAG_HANDLER_MAP[e];if(o){var u=o.handle(e,r,n);if("string"==typeof u)return u}return this.transformAsIs(e,r,n)},t.prototype.filterXSS=function(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")},t.prototype.registerTagHandler=function(t){this.TAG_HANDLER_MAP[t.tagName()]=t,this.TAG_ALIASES_MAP[t.tagName()]=t.tagName()},t.prototype.bbcode2html=function(n){for(var r=[],e=t.STATE_NORMAL,o="",u=0;u<n.length;u++){var a=n[u];switch(a){case"[":e===t.STATE_NORMAL&&u<n.length?(o.length>0&&(r.push({type:t.TYPE_TEXT,value:o.replace(/ /g,"&nbsp;")}),o=""),o="[","/"===n[u+1]?(e=t.STATE_BBCODE_CLOSE_START,o+="/",u++):e=t.STATE_BBCODE_OPEN_START):e===t.STATE_BBCODE_OPEN_START||e===t.STATE_BBCODE_CLOSE_START?o.length>0&&(r.push({type:t.TYPE_TEXT,value:o.replace(/ /g,"&nbsp;")}),o="["):o+=a;break;case"]":if(e===t.STATE_BBCODE_OPEN_START){var i="",p=o.indexOf(" ");p<=0&&(p=o.indexOf("=")),p>0&&(i=o.substring(p+1),o=o.substring(0,p)),r.push({type:t.TYPE_BBCODE_OPEN,value:o,arg:i.replace(/ /g,"&nbsp;")}),o="",e=t.STATE_NORMAL}else if(e===t.STATE_BBCODE_CLOSE_START){var c="",s=!1;t:for(;;){var l=r.pop();if(!l)break;switch(l.type){case t.TYPE_TEXT:c=l.value.replace(/ /g,"&nbsp;")+c;break;case t.TYPE_BBCODE_OPEN:if(l.value.substring(1)===o.substring(2)){r.push({type:t.TYPE_TEXT,value:this.transformTag(l.value,c,l.arg)}),c="",s=!0;break t}c=this.transformTag(l.value,c,l.arg)}}s||(c+=o+"]"),c.length>0&&r.push({type:t.TYPE_TEXT,value:c}),o="",e=t.STATE_NORMAL}else o+=a;break;case"\n":o+="<br/>";break;default:o+=a}}for(var f="",_=void 0;_=r.pop();)_.type===t.TYPE_BBCODE_OPEN?(o.length>0&&(f+=o,o=""),f=this.transformTag(_.value,f,_.arg)):_.type===t.TYPE_TEXT&&(f=_.value+f);return o.length>0&&(f+=o),f},t.STATE_NORMAL=0,t.STATE_BBCODE_OPEN_START=1,t.STATE_BBCODE_CLOSE_START=2,t.TYPE_TEXT=0,t.TYPE_BBCODE_OPEN=1,t}());T.registerTagHandler(new o),T.registerTagHandler(new a),T.registerTagHandler(new p),T.registerTagHandler(new s),T.registerTagHandler(new f),T.registerTagHandler(new y),t.g.bbcode2html=function(t){return T.bbcode2html(t)}})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9iYmNvZGUtcGFyc2VyL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2JiY29kZS1wYXJzZXIvd2VicGFjay9ydW50aW1lL2dsb2JhbCIsIndlYnBhY2s6Ly9iYmNvZGUtcGFyc2VyLy4vc3JjL3RhZy9UYWdIYW5kbGVyLnRzIiwid2VicGFjazovL2JiY29kZS1wYXJzZXIvLi9zcmMvdGFnL2hhbmRsZXJzL1RhZ0hhbmRsZXJCb2xkLnRzIiwid2VicGFjazovL2JiY29kZS1wYXJzZXIvLi9zcmMvdGFnL2hhbmRsZXJzL1RhZ0hhbmRsZXJJdGFsaWMudHMiLCJ3ZWJwYWNrOi8vYmJjb2RlLXBhcnNlci8uL3NyYy90YWcvaGFuZGxlcnMvVGFnSGFuZGxlckNvbG9yLnRzIiwid2VicGFjazovL2JiY29kZS1wYXJzZXIvLi9zcmMvdGFnL2hhbmRsZXJzL1RhZ0hhbmRsZXJNYXNrLnRzIiwid2VicGFjazovL2JiY29kZS1wYXJzZXIvLi9zcmMvdGFnL2hhbmRsZXJzL1RhZ0hhbmRsZXJDb2xsYXBzZS50cyIsIndlYnBhY2s6Ly9iYmNvZGUtcGFyc2VyLy4vc3JjL3RhZy9oYW5kbGVycy9UYWdIYW5kbGVyRGljZS50cyIsIndlYnBhY2s6Ly9iYmNvZGUtcGFyc2VyLy4vc3JjL2luZGV4LnRzIiwid2VicGFjazovL2JiY29kZS1wYXJzZXIvLi9zcmMvQkJDT0RFUGFyc2VyLnRzIl0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJnIiwiZ2xvYmFsVGhpcyIsInRoaXMiLCJGdW5jdGlvbiIsImUiLCJ3aW5kb3ciLCJnZXRBcmciLCJhcmdzIiwibmFtZSIsInRhZ05hbWUiLCJ0YWdBbGlhc2VzIiwiaGFuZGxlIiwidGFnTGFiZWwiLCJhcmciLCJjb250ZW50IiwiVGFnSGFuZGxlciIsIm1hdGNoIiwiaW5kZXhPZiIsInN1YnN0cmluZyIsIk1hdGgiLCJyb3VuZCIsInJhbmRvbSIsImRlZmF1bHRCQkNvZGVQYXJzZXIiLCJUQUdfSEFORExFUl9NQVAiLCJUQUdfQUxJQVNFU19NQVAiLCJ0cmFuc2Zvcm1Bc0lzIiwidHJhbnNmb3JtVGFnIiwiaGFuZGxlciIsInJlc3VsdCIsImZpbHRlclhTUyIsInN0ciIsInJlcGxhY2UiLCJyZWdpc3RlclRhZ0hhbmRsZXIiLCJiYmNvZGUyaHRtbCIsInJhd0NvbnRlbnQiLCJzdGFjayIsInN0YXRlIiwiQkJDT0RFUGFyc2VyIiwiU1RBVEVfTk9STUFMIiwidG1wIiwiaWR4IiwibGVuZ3RoIiwiY2hhciIsInB1c2giLCJ0eXBlIiwiVFlQRV9URVhUIiwidmFsdWUiLCJTVEFURV9CQkNPREVfQ0xPU0VfU1RBUlQiLCJTVEFURV9CQkNPREVfT1BFTl9TVEFSVCIsImFyZ0lkeCIsIlRZUEVfQkJDT0RFX09QRU4iLCJzdWNjZXNzQ2xvc2VkIiwib3V0IiwicG9wIiwibm9kZSIsInVuZGVmaW5lZCIsIlRhZ0hhbmRsZXJCb2xkIiwiVGFnSGFuZGxlckl0YWxpYyIsIlRhZ0hhbmRsZXJDb2xvciIsIlRhZ0hhbmRsZXJNYXNrIiwiVGFnSGFuZGxlckNvbGxhcHNlIiwiVGFnSGFuZGxlckRpY2UiXSwibWFwcGluZ3MiOiJtQkFDQSxJQUFJQSxFQUFzQixHQ0QxQkEsRUFBb0JDLEVBQUksV0FDdkIsR0FBMEIsaUJBQWZDLFdBQXlCLE9BQU9BLFdBQzNDLElBQ0MsT0FBT0MsTUFBUSxJQUFJQyxTQUFTLGNBQWIsR0FDZCxNQUFPQyxHQUNSLEdBQXNCLGlCQUFYQyxPQUFxQixPQUFPQSxRQUxqQixHQ0F4QixJLEVBQUEsMkJBZUEsT0FISSxZQUFBQyxPQUFBLFNBQU9DLEVBQWNDLEtBR3pCLEVBZkEsRyxrY0NFQSwyQiwrQ0FlQSxPQWZvQyxPQUNoQyxZQUFBQyxRQUFBLFdBQ0ksTUFBTyxLQUdYLFlBQUFDLFdBQUEsV0FDSSxNQUFPLElBR1gsWUFBQUMsT0FBQSxTQUFPQyxFQUFrQkMsRUFBYUMsR0FDbEMsT0FBS0EsRUFHRSxJQUFJWixLQUFLTyxVQUFTLElBQUlLLEVBQU8sS0FBS1osS0FBS08sVUFBUyxJQUY1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QUNaLEVBQUFLLGlCQUFtQixFQXFLL0MsRUExS0EsSURNQTVCLEVBQW9CVSxtQkFBbUIsSUFBSXdCLEdBQzNDbEMsRUFBb0JVLG1CQUFtQixJQUFJeUIsR0FDM0NuQyxFQUFvQlUsbUJBQW1CLElBQUkwQixHQUMzQ3BDLEVBQW9CVSxtQkFBbUIsSUFBSTJCLEdBQzNDckMsRUFBb0JVLG1CQUFtQixJQUFJNEIsR0FDM0N0QyxFQUFvQlUsbUJBQW1CLElBQUk2QixHQUszQyxFQUFBN0QsRUFBT2lDLFlBQWMsU0FBVUMsR0FDM0IsT0FBT1osRUFBb0JXLFlBQVlDLEsiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIl9fd2VicGFja19yZXF1aXJlX18uZyA9IChmdW5jdGlvbigpIHtcblx0aWYgKHR5cGVvZiBnbG9iYWxUaGlzID09PSAnb2JqZWN0JykgcmV0dXJuIGdsb2JhbFRoaXM7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIHRoaXMgfHwgbmV3IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG5cdH0gY2F0Y2ggKGUpIHtcblx0XHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcpIHJldHVybiB3aW5kb3c7XG5cdH1cbn0pKCk7IiwiZXhwb3J0IGFic3RyYWN0IGNsYXNzIFRhZ0hhbmRsZXIge1xyXG4gICAgYWJzdHJhY3QgdGFnTmFtZSgpOiBzdHJpbmc7XHJcbiAgICBhYnN0cmFjdCB0YWdBbGlhc2VzKCk6IHN0cmluZ1tdO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB0YWdMYWJlbCDnlKjmiLfovpPlhaXnmoR0YWdOYW1lXHJcbiAgICAgKiBAcGFyYW0gYXJnIOeUqOaIt+WcqG9wZW4gdGFn5Lit5YaZ55qE5Y+C5pWwXHJcbiAgICAgKiBAcGFyYW0gY29udGVudCDlvIDpl63moIfnrb7kuK3pl7TnmoTlhoXlrrnvvIzpnIDopoHms6jmhI/nmoTmmK/lnKjltYzlpZfmoIfnrb7nmoTmg4XlhrXkuIvvvIzlpJblsYLmoIfnrb7lvpfliLDnmoRjb250ZW505piv5bey57uP6KKr5YaF5bGC5qCH562+5aSE55CG5a6M5LmL5ZCO55qE57uT5p6cXHJcbiAgICAgKi9cclxuICAgIGFic3RyYWN0IGhhbmRsZSh0YWdMYWJlbDogc3RyaW5nLCBhcmc6IHN0cmluZywgY29udGVudDogc3RyaW5nKTogc3RyaW5nfGZhbHNlO1xyXG5cclxuICAgIGdldEFyZyhhcmdzOiBzdHJpbmcsIG5hbWU6IHN0cmluZykge1xyXG5cclxuICAgIH1cclxufVxyXG5cclxuXHJcbiIsImltcG9ydCB7IFRhZ0hhbmRsZXIgfSBmcm9tICcuLi9UYWdIYW5kbGVyJztcclxuXHJcbmV4cG9ydCBjbGFzcyBUYWdIYW5kbGVyQm9sZCBleHRlbmRzIFRhZ0hhbmRsZXIge1xyXG4gICAgdGFnTmFtZSgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiAnYic7XHJcbiAgICB9O1xyXG5cclxuICAgIHRhZ0FsaWFzZXMoKTogc3RyaW5nW10ge1xyXG4gICAgICAgIHJldHVybiBbXTtcclxuICAgIH07XHJcblxyXG4gICAgaGFuZGxlKHRhZ0xhYmVsOiBzdHJpbmcsIGFyZzogc3RyaW5nLCBjb250ZW50OiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgICAgIGlmICghY29udGVudCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJyc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBgPCR7dGhpcy50YWdOYW1lKCl9PiR7Y29udGVudH08LyR7dGhpcy50YWdOYW1lKCl9PmA7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgVGFnSGFuZGxlciB9IGZyb20gJy4uL1RhZ0hhbmRsZXInO1xyXG5cclxuZXhwb3J0IGNsYXNzIFRhZ0hhbmRsZXJJdGFsaWMgZXh0ZW5kcyBUYWdIYW5kbGVyIHtcclxuICAgIHRhZ05hbWUoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gJ2knO1xyXG4gICAgfTtcclxuXHJcbiAgICB0YWdBbGlhc2VzKCk6IHN0cmluZ1tdIHtcclxuICAgICAgICByZXR1cm4gW107XHJcbiAgICB9O1xyXG5cclxuICAgIGhhbmRsZSh0YWdMYWJlbDogc3RyaW5nLCBhcmc6IHN0cmluZywgY29udGVudDogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgICAgICBpZiAoIWNvbnRlbnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYDwke3RoaXMudGFnTmFtZSgpfT4ke2NvbnRlbnR9PC8ke3RoaXMudGFnTmFtZSgpfT5gO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IFRhZ0hhbmRsZXIgfSBmcm9tICcuLi9UYWdIYW5kbGVyJztcclxuXHJcbmV4cG9ydCBjbGFzcyBUYWdIYW5kbGVyQ29sb3IgZXh0ZW5kcyBUYWdIYW5kbGVyIHtcclxuICAgIHRhZ05hbWUoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gJ2NvbG9yJztcclxuICAgIH07XHJcblxyXG4gICAgdGFnQWxpYXNlcygpOiBzdHJpbmdbXSB7XHJcbiAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgfTtcclxuXHJcbiAgICBoYW5kbGUodGFnTGFiZWw6IHN0cmluZywgYXJnOiBzdHJpbmcsIGNvbnRlbnQ6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgaWYgKCFjb250ZW50KSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnJztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFhcmcpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNvbnRlbnQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChhcmcubWF0Y2goL15bMC05YS1mQS1GXXs2fSQvKSkge1xyXG4gICAgICAgICAgICBhcmcgPSAnIycgKyBhcmc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBgPHNwYW4gc3R5bGU9XCJjb2xvcjoke2FyZ31cIj4ke2NvbnRlbnR9PC9zcGFuPmA7XHJcbiAgICB9XHJcbn1cclxuXHJcbiIsImltcG9ydCB7IFRhZ0hhbmRsZXIgfSBmcm9tICcuLi9UYWdIYW5kbGVyJztcclxuXHJcbmV4cG9ydCBjbGFzcyBUYWdIYW5kbGVyTWFzayBleHRlbmRzIFRhZ0hhbmRsZXIge1xyXG4gICAgdGFnTmFtZSgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiAnbWFzayc7XHJcbiAgICB9O1xyXG5cclxuICAgIHRhZ0FsaWFzZXMoKTogc3RyaW5nW10ge1xyXG4gICAgICAgIHJldHVybiBbXTtcclxuICAgIH07XHJcblxyXG4gICAgaGFuZGxlKHRhZ0xhYmVsOiBzdHJpbmcsIGFyZzogc3RyaW5nLCBjb250ZW50OiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgICAgIGlmICghY29udGVudCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJyc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBgPGRpdiBjbGFzcz1cIm1hc2tcIj48c3BhbiBjbGFzcz1cImhlaW11XCIgdGl0bGU9XCLkvaDnn6XpgZPnmoTlpKrlpJrkuoZcIj4ke2NvbnRlbnR9PC9zcGFuPjwvZGl2PmA7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgVGFnSGFuZGxlciB9IGZyb20gJy4uL1RhZ0hhbmRsZXInO1xyXG5cclxuZXhwb3J0IGNsYXNzIFRhZ0hhbmRsZXJDb2xsYXBzZSBleHRlbmRzIFRhZ0hhbmRsZXIge1xyXG4gICAgdGFnTmFtZSgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiAnY29sbGFwc2UnO1xyXG4gICAgfTtcclxuXHJcbiAgICB0YWdBbGlhc2VzKCk6IHN0cmluZ1tdIHtcclxuICAgICAgICByZXR1cm4gW107XHJcbiAgICB9O1xyXG5cclxuICAgIGhhbmRsZSh0YWdMYWJlbDogc3RyaW5nLCBhcmc6IHN0cmluZywgY29udGVudDogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgICAgICBpZiAoIWFyZykge1xyXG4gICAgICAgICAgICBhcmcgPSBcIueCueWHu+WxleW8gFwiXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChhcmcuaW5kZXhPZigndGl0bGU9JykgPT09IDApIHtcclxuICAgICAgICAgICAgYXJnID0gYXJnLnN1YnN0cmluZyg2KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGA8ZGl2PjxkZXRhaWxzPjxzdW1tYXJ5PjxiPiR7YXJnfTwvYj48L3N1bW1hcnk+PHA+JHtjb250ZW50fTwvcD48L2RldGFpbHM+PC9kaXY+YDtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBUYWdIYW5kbGVyIH0gZnJvbSAnLi4vVGFnSGFuZGxlcic7XHJcblxyXG5leHBvcnQgY2xhc3MgVGFnSGFuZGxlckRpY2UgZXh0ZW5kcyBUYWdIYW5kbGVyIHtcclxuICAgIHRhZ05hbWUoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gJ2RpY2UnO1xyXG4gICAgfTtcclxuXHJcbiAgICB0YWdBbGlhc2VzKCk6IHN0cmluZ1tdIHtcclxuICAgICAgICByZXR1cm4gW107XHJcbiAgICB9O1xyXG5cclxuICAgIGhhbmRsZSh0YWdMYWJlbDogc3RyaW5nLCBhcmc6IHN0cmluZywgY29udGVudDogc3RyaW5nKTogc3RyaW5nfGZhbHNlIHtcclxuICAgICAgICBpZiAoIWNvbnRlbnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY29udGVudC5tYXRjaCgvXigoXFxkKyl8KFxcZCpkXFxkKykpKFxcKygoXFxkKyl8KFxcZCpkXFxkKykpKSokLykpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGA8ZGl2IGNsYXNzPVwiZGljZVwiPuWBh+ijheaciemqsOWomO+8miR7Y29udGVudH09JHtNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkgKiAyMDApfTwvZGl2PmA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBUYWdIYW5kbGVyQm9sZCB9IGZyb20gJy4vdGFnL2hhbmRsZXJzL1RhZ0hhbmRsZXJCb2xkJztcclxuaW1wb3J0IHsgVGFnSGFuZGxlckl0YWxpYyB9IGZyb20gJy4vdGFnL2hhbmRsZXJzL1RhZ0hhbmRsZXJJdGFsaWMnO1xyXG5pbXBvcnQgeyBUYWdIYW5kbGVyQ29sb3IgfSBmcm9tICcuL3RhZy9oYW5kbGVycy9UYWdIYW5kbGVyQ29sb3InO1xyXG5pbXBvcnQgeyBUYWdIYW5kbGVyTWFzayB9IGZyb20gJy4vdGFnL2hhbmRsZXJzL1RhZ0hhbmRsZXJNYXNrJztcclxuaW1wb3J0IHsgVGFnSGFuZGxlckNvbGxhcHNlIH0gZnJvbSAnLi90YWcvaGFuZGxlcnMvVGFnSGFuZGxlckNvbGxhcHNlJztcclxuaW1wb3J0IHsgVGFnSGFuZGxlckRpY2UgfSBmcm9tICcuL3RhZy9oYW5kbGVycy9UYWdIYW5kbGVyRGljZSc7XHJcbmltcG9ydCB7IEJCQ09ERVBhcnNlciB9IGZyb20gJy4vQkJDT0RFUGFyc2VyJztcclxuXHJcbmNvbnN0IGRlZmF1bHRCQkNvZGVQYXJzZXIgPSBuZXcgQkJDT0RFUGFyc2VyKCk7XHJcbmRlZmF1bHRCQkNvZGVQYXJzZXIucmVnaXN0ZXJUYWdIYW5kbGVyKG5ldyBUYWdIYW5kbGVyQm9sZCgpKTtcclxuZGVmYXVsdEJCQ29kZVBhcnNlci5yZWdpc3RlclRhZ0hhbmRsZXIobmV3IFRhZ0hhbmRsZXJJdGFsaWMoKSk7XHJcbmRlZmF1bHRCQkNvZGVQYXJzZXIucmVnaXN0ZXJUYWdIYW5kbGVyKG5ldyBUYWdIYW5kbGVyQ29sb3IoKSk7XHJcbmRlZmF1bHRCQkNvZGVQYXJzZXIucmVnaXN0ZXJUYWdIYW5kbGVyKG5ldyBUYWdIYW5kbGVyTWFzaygpKTtcclxuZGVmYXVsdEJCQ29kZVBhcnNlci5yZWdpc3RlclRhZ0hhbmRsZXIobmV3IFRhZ0hhbmRsZXJDb2xsYXBzZSgpKTtcclxuZGVmYXVsdEJCQ29kZVBhcnNlci5yZWdpc3RlclRhZ0hhbmRsZXIobmV3IFRhZ0hhbmRsZXJEaWNlKCkpO1xyXG5cclxuZXhwb3J0IHsgZGVmYXVsdEJCQ29kZVBhcnNlciB9O1xyXG5cclxuZGVjbGFyZSB2YXIgZ2xvYmFsOiBhbnk7XHJcbmdsb2JhbC5iYmNvZGUyaHRtbCA9IGZ1bmN0aW9uIChyYXdDb250ZW50OiBzdHJpbmcpIHtcclxuICAgIHJldHVybiBkZWZhdWx0QkJDb2RlUGFyc2VyLmJiY29kZTJodG1sKHJhd0NvbnRlbnQpO1xyXG59XHJcbiIsImltcG9ydCB7IFRhZ0hhbmRsZXIgfSBmcm9tICcuL3RhZy9UYWdIYW5kbGVyJztcclxuXHJcblxyXG5leHBvcnQgY2xhc3MgQkJDT0RFUGFyc2VyIHtcclxuICAgIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IFNUQVRFX05PUk1BTCA9IDA7XHJcbiAgICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBTVEFURV9CQkNPREVfT1BFTl9TVEFSVCA9IDE7XHJcbiAgICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBTVEFURV9CQkNPREVfQ0xPU0VfU1RBUlQgPSAyO1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgVFlQRV9URVhUID0gMDtcclxuICAgIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IFRZUEVfQkJDT0RFX09QRU4gPSAxO1xyXG5cclxuICAgIHJlYWRvbmx5IFRBR19IQU5ETEVSX01BUDogeyBba2V5OiBzdHJpbmddOiBUYWdIYW5kbGVyIH0gPSB7fTtcclxuICAgIHJlYWRvbmx5IFRBR19BTElBU0VTX01BUDogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfSA9IHt9O1xyXG5cclxuICAgIHRyYW5zZm9ybUFzSXModGFnTmFtZTogc3RyaW5nLCBhcmc6IHN0cmluZywgY29udGVudDogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgICAgICBsZXQgb3BlblRhZyA9ICcnO1xyXG4gICAgICAgIGlmIChhcmcpIHtcclxuICAgICAgICAgICAgb3BlblRhZyA9IGAke3RhZ05hbWV9PSR7YXJnfWA7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgb3BlblRhZyA9IHRhZ05hbWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBgWyR7b3BlblRhZ31dJHtjb250ZW50fVsvJHt0YWdOYW1lfV1gO1xyXG4gICAgfVxyXG5cclxuICAgIHRyYW5zZm9ybVRhZyh0YWdMYWJlbDogc3RyaW5nLCBjb250ZW50OiBzdHJpbmcsIGFyZzogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgICAgICBpZiAoY29udGVudCA9PT0gdW5kZWZpbmVkIHx8IGNvbnRlbnQgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgY29udGVudCA9ICcnO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0YWdMYWJlbCA9IHRhZ0xhYmVsLnN1YnN0cmluZygxKTtcclxuICAgICAgICBjb25zdCB0YWdOYW1lID0gdGhpcy5UQUdfQUxJQVNFU19NQVBbdGFnTGFiZWxdO1xyXG4gICAgICAgIGlmICghdGFnTmFtZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy50cmFuc2Zvcm1Bc0lzKHRhZ0xhYmVsLCBhcmcsIGNvbnRlbnQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgaGFuZGxlciA9IHRoaXMuVEFHX0hBTkRMRVJfTUFQW3RhZ05hbWVdO1xyXG4gICAgICAgIGlmIChoYW5kbGVyKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGhhbmRsZXIuaGFuZGxlKHRhZ05hbWUsIGFyZywgY29udGVudCk7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgcmVzdWx0ID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy50cmFuc2Zvcm1Bc0lzKHRhZ05hbWUsIGFyZywgY29udGVudCk7XHJcbiAgICB9XHJcblxyXG4gICAgZmlsdGVyWFNTKHN0cjogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gc3RyXHJcbiAgICAgICAgICAgIC5yZXBsYWNlKC8mL2csICcmYW1wOycpXHJcbiAgICAgICAgICAgIC5yZXBsYWNlKC88L2csICcmbHQ7JylcclxuICAgICAgICAgICAgLnJlcGxhY2UoLz4vZywgJyZndDsnKVxyXG4gICAgICAgICAgICAucmVwbGFjZSgvXCIvZywgJyZxdW90OycpXHJcbiAgICAgICAgICAgIC5yZXBsYWNlKC8nL2csICcmIzM5OycpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlZ2lzdGVyVGFnSGFuZGxlcihoYW5kbGVyOiBUYWdIYW5kbGVyKSB7XHJcbiAgICAgICAgdGhpcy5UQUdfSEFORExFUl9NQVBbaGFuZGxlci50YWdOYW1lKCldID0gaGFuZGxlcjtcclxuICAgICAgICB0aGlzLlRBR19BTElBU0VTX01BUFtoYW5kbGVyLnRhZ05hbWUoKV0gPSBoYW5kbGVyLnRhZ05hbWUoKTtcclxuICAgIH1cclxuXHJcbi8vIFRPRE8g6Ieq5a6a5LmJ6Kej5p6Q77ya5qCH562+5YaF6YOo5bWM5aWX55qE5omA5pyJ5Lic6KW/6YO95Lqk57uZ6Ieq5a6a5LmJ6Kej5p6Q5Zmo77yM5Y+v5Lul6Ieq6KGM5aSE55CG5YaF5a656Kej5p6Q44CC55So6YCU77yaW2NvZGVdWy9jb2RlXeOAgVtsaXN0XVsqXXh4Wy9saXN0XVxyXG4vLyBUT0RPIOeJueauiuino+aekO+8mltjb2RlXeagh+etvuW6lOivpeW/veeVpeato+W4uOeahOmXreWQiOagh+etvu+8jOebtOWIsOaJvuWIsOS6hlsvY29kZV3miJbogIXliLDovr7lrZfnrKbkuLLmnKvlsL5cclxuICAgIGJiY29kZTJodG1sKHJhd0NvbnRlbnQ6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgLy8gVE9ETyBhbnnmlLnmjqXlj6NcclxuICAgICAgICBjb25zdCBzdGFjazogYW55W10gPSBbXTtcclxuICAgICAgICBsZXQgc3RhdGUgPSBCQkNPREVQYXJzZXIuU1RBVEVfTk9STUFMO1xyXG4gICAgICAgIGxldCB0bXAgPSAnJztcclxuICAgICAgICBmb3IgKGxldCBpZHggPSAwOyBpZHggPCByYXdDb250ZW50Lmxlbmd0aDsgaWR4KyspIHtcclxuICAgICAgICAgICAgY29uc3QgY2hhciA9IHJhd0NvbnRlbnRbaWR4XTtcclxuICAgICAgICAgICAgc3dpdGNoIChjaGFyKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdbJzoge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZSA9PT0gQkJDT0RFUGFyc2VyLlNUQVRFX05PUk1BTCAmJiBpZHggPCByYXdDb250ZW50Lmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodG1wLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YWNrLnB1c2goe3R5cGU6IEJCQ09ERVBhcnNlci5UWVBFX1RFWFQsIHZhbHVlOiB0bXAucmVwbGFjZSgvIC9nLCAnJm5ic3A7Jyl9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcCA9ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRtcCA9ICdbJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJhd0NvbnRlbnRbaWR4ICsgMV0gPT09ICcvJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUgPSBCQkNPREVQYXJzZXIuU1RBVEVfQkJDT0RFX0NMT1NFX1NUQVJUO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG1wICs9ICcvJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeCsrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUgPSBCQkNPREVQYXJzZXIuU1RBVEVfQkJDT0RFX09QRU5fU1RBUlQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHN0YXRlID09PSBCQkNPREVQYXJzZXIuU1RBVEVfQkJDT0RFX09QRU5fU1RBUlQgfHwgc3RhdGUgPT09IEJCQ09ERVBhcnNlci5TVEFURV9CQkNPREVfQ0xPU0VfU1RBUlQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRtcC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFjay5wdXNoKHt0eXBlOiBCQkNPREVQYXJzZXIuVFlQRV9URVhULCB2YWx1ZTogdG1wLnJlcGxhY2UoLyAvZywgJyZuYnNwOycpfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bXAgPSAnWyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0bXAgKz0gY2hhcjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXNlICddJzoge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZSA9PT0gQkJDT0RFUGFyc2VyLlNUQVRFX0JCQ09ERV9PUEVOX1NUQVJUKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBhcmcgPSAnJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGFyZ0lkeCA9IHRtcC5pbmRleE9mKCcgJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhcmdJZHggPD0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJnSWR4ID0gdG1wLmluZGV4T2YoJz0nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXJnSWR4ID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJnID0gdG1wLnN1YnN0cmluZyhhcmdJZHggKyAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcCA9IHRtcC5zdWJzdHJpbmcoMCwgYXJnSWR4KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFjay5wdXNoKHt0eXBlOiBCQkNPREVQYXJzZXIuVFlQRV9CQkNPREVfT1BFTiwgdmFsdWU6IHRtcCwgYXJnOiBhcmcucmVwbGFjZSgvIC9nLCAnJm5ic3A7Jyl9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG1wID0gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlID0gQkJDT0RFUGFyc2VyLlNUQVRFX05PUk1BTDtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHN0YXRlID09PSBCQkNPREVQYXJzZXIuU1RBVEVfQkJDT0RFX0NMT1NFX1NUQVJUKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjb250ZW50ID0gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzdWNjZXNzQ2xvc2VkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dDogd2hpbGUgKHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5vZGUgPSBzdGFjay5wb3AoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbm9kZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChub2RlLnR5cGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIEJCQ09ERVBhcnNlci5UWVBFX1RFWFQ6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudCA9IG5vZGUudmFsdWUucmVwbGFjZSgvIC9nLCAnJm5ic3A7JykgKyBjb250ZW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBCQkNPREVQYXJzZXIuVFlQRV9CQkNPREVfT1BFTjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobm9kZS52YWx1ZS5zdWJzdHJpbmcoMSkgPT09IHRtcC5zdWJzdHJpbmcoMikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YWNrLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IEJCQ09ERVBhcnNlci5UWVBFX1RFWFQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHRoaXMudHJhbnNmb3JtVGFnKG5vZGUudmFsdWUsIGNvbnRlbnQsIG5vZGUuYXJnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50ID0gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzQ2xvc2VkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrIG91dDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgPSB0aGlzLnRyYW5zZm9ybVRhZyhub2RlLnZhbHVlLCBjb250ZW50LCBub2RlLmFyZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFzdWNjZXNzQ2xvc2VkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50ICs9IHRtcCArICddJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29udGVudC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFjay5wdXNoKHt0eXBlOiBCQkNPREVQYXJzZXIuVFlQRV9URVhULCB2YWx1ZTogY29udGVudH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRtcCA9ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZSA9IEJCQ09ERVBhcnNlci5TVEFURV9OT1JNQUw7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG1wICs9IGNoYXI7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2FzZSAnXFxuJzoge1xyXG4gICAgICAgICAgICAgICAgICAgIHRtcCArPSAnPGJyLz4nO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDoge1xyXG4gICAgICAgICAgICAgICAgICAgIHRtcCArPSBjaGFyO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCByZXN1bHQgPSAnJztcclxuICAgICAgICBsZXQgbm9kZSA9IHVuZGVmaW5lZDtcclxuICAgICAgICB3aGlsZSAobm9kZSA9IHN0YWNrLnBvcCgpKSB7XHJcbiAgICAgICAgICAgIGlmIChub2RlLnR5cGUgPT09IEJCQ09ERVBhcnNlci5UWVBFX0JCQ09ERV9PUEVOKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodG1wLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gdG1wO1xyXG4gICAgICAgICAgICAgICAgICAgIHRtcCA9ICcnO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy50cmFuc2Zvcm1UYWcobm9kZS52YWx1ZSwgcmVzdWx0LCBub2RlLmFyZyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobm9kZS50eXBlID09PSBCQkNPREVQYXJzZXIuVFlQRV9URVhUKSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBub2RlLnZhbHVlICsgcmVzdWx0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0bXAubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICByZXN1bHQgKz0gdG1wO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG59XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=